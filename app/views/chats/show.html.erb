<div class="container" data-controller="chat-subscription" data-chat-subscription-chat-id-value="<%= @chat.id %>" data-current-user-id="<%= current_user.id %>">
  <div class="chat-header">
    <h1><%= @partner.first_name %></h1>
    <% if @partner.photo.attached? %>
      <div><%= cl_image_tag @partner.photo.key, height: 50, width: 50, crop: :fill,  class: "chat-picture" %></div>
    <% end %>
  </div>
  </div>
  <div class="messages" data-chat-subscription-target="messages">
    <% @chat.messages.each do |message| %>
      <%= render 'messages/message', message: message %>
    <% end %>
  </div>
  <div class="chat-form">
    <%= simple_form_for [@chat, @message], remote: true, html: {data: {chat_subscription_target: "form"}} do |f| %>
      <%= f.input :content, label: false, autofocus: true, placeholder: "Say something...", class: 'chat-content' %>
      <%= f.button :submit, 'Send', class: "chat-button" %>
    <% end %>
  </div>
</div>
