
<% if pairing_sessions != nil %>
<% if pairing_sessions.count > 0 %>
  <div data-new-session-target="pairing-sessions" class="pairing-session-card-container">
    <h4 class="text-center mt-3">Here are your possible activites!</h4>
    <div id="carouselExampleControls" class="carousel slide" data-bs-ride="carousel">
      <div class="carousel-inner">
        <% pairing_sessions.each_with_index do |pairing_session, index| %>
          <div class="carousel-item <%= 'active' if index == 0 %>">
            <div class="pairing-session-card " data-controller="session-card" data-id="<%= pairing_session.id %>" data-user-id="<%= current_user.id %>">
              <% if pairing_session.user.photo.attached? %>
                <%= cl_image_tag pairing_session.user.photo.key, height: 150, width: 150, crop: :fill,  class: "pairing-session-card-image" %>
              <% else %>
                <img src="<%= image_path("blank-profile-picture-973460_1280.png") %>" alt="" class="pairing-session-card-image">
              <% end %>
              <h4><%= "#{pairing_session.user.first_name}'s #{pairing_session.activity} session!" %>
              <p><%= pairing_session.description %></p>
              <p><%= pairing_session.datetime.strftime("%a %b %e at %l:%M %p") %></p>
              <p><%= pairing_session.address %></p>
              <div class="pairing-session-button-container">
                <button class="select-btn mb-3">Reject</button>
                <button data-action="click->session-card#sendRequest" data-toggle="modal" data-target="#exampleModal" class="select-btn-affirmative mb-3">Pair</button>
              </div>
            </div>
          </div>
        <% end %>
      </div>
        <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleControls" data-bs-slide="prev">
          <span class="carousel-control-prev-icon" aria-hidden="true"></span>
          <span class="visually-hidden">Previous</span>
        </button>
        <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleControls" data-bs-slide="next">
          <span class="carousel-control-next-icon" aria-hidden="true"></span>
          <span class="visually-hidden">Next</span>
        </button>
      </div>

  </div>
<% else %>
  <p>No current sessions at the moment. Who don't you start your own? Give a quick description of the kind of session you want and start pairing!</p>
    <%= simple_form_for pairing_session, data: {newsession_target: "newForm"} do |f| %>
    <div class="d-none">
      <%= f.input :activity %>
      <%= f.input :address %>
      <%= f.input :datetime, html5: true %>
    </div>
    <%= f.input :description %>
    <%= f.submit 'Start pairing!', class: "btn profile-btn" %>
  <% end %>
 <% end %>
<% end %>
